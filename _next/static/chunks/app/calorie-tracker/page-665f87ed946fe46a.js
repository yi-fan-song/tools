(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[557],{8041:function(e,t,s){Promise.resolve().then(s.bind(s,6596))},6596:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var l=s(7437),a=s(2265),n=s(5657),i=s(4827);let r=e=>{let{entry:t,removeSelf:s,updateSelf:r}=e,c=(0,a.useContext)(i.W),[u,o]=(0,a.useState)(!1),[d,m]=(0,a.useState)(!1),[x,f]=(0,a.useState)(t.name),[b,p]=(0,a.useState)(t.calorie_count),h=async e=>{if(e.preventDefault(),u){m(!0);let{error:e}=await c.from("calorie_entry").update({calorie_count:b,name:x}).eq("id",t.id).select();e?((0,n.ZP)(e.message),console.error(e)):r({...t,calorie_count:b,name:x}),m(!1),o(!1)}else o(!0)},j=async()=>{m(!0);let{error:e}=await c.from("calorie_entry").delete().eq("id",t.id);e&&((0,n.ZP)(e.message),console.error(e)),s(),m(!1)},N=d||!u;return(0,l.jsxs)("form",{className:"flex flex-row gap-2 w-full justify-between",children:[(0,l.jsx)("input",{disabled:N,className:N?"":"text-black",value:x,onChange:e=>{f(e.target.value)}}),(0,l.jsx)("input",{disabled:N,className:N?"":"text-black",value:b,onChange:e=>{""===e.target.value&&p(0);let t=Number.parseInt(e.target.value);Number.isNaN(t)||p(t)}}),(0,l.jsx)("button",{type:"submit",onClick:h,disabled:d,children:u?"save":"edit"}),(0,l.jsx)("button",{type:"button",onClick:j,disabled:d,children:"delete"})]})},c=e=>{let{cancel:t,saveEntry:s}=e,r=(0,a.useContext)(i.W),[c,u]=(0,a.useState)(!1),[o,d]=(0,a.useState)(""),[m,x]=(0,a.useState)(0),f=async e=>{e.preventDefault(),u(!0);let{data:t,error:l}=await r.from("calorie_entry").insert([{name:o,calorie_count:m}]).select();l||!t?((0,n.ZP)(l.message),console.error(l)):s(t[0]),u(!1)};return(0,l.jsxs)("form",{className:"flex flex-row gap-2 w-full justify-between",children:[(0,l.jsx)("input",{disabled:c,className:c?"":"text-black",value:o,onChange:e=>{d(e.target.value)}}),(0,l.jsx)("input",{disabled:c,className:c?"":"text-black",value:m,onChange:e=>{""===e.target.value&&x(0);let t=Number.parseInt(e.target.value);Number.isNaN(t)||x(t)}}),(0,l.jsx)("button",{type:"submit",onClick:f,disabled:c,children:"add"}),(0,l.jsx)("button",{type:"button",onClick:t,disabled:c,children:"cancel"})]})},u=()=>{let e=(0,a.useContext)(i.W),[t,s]=(0,a.useState)(!0),[u,o]=(0,a.useState)([]);(0,a.useEffect)(()=>((async()=>{let t=new Date(Date.now());t.setHours(0),t.setMinutes(0),t.setMilliseconds(0),t.setSeconds(0);let{data:l,error:a}=await e.from("calorie_entry").select("*").gte("created_at",t.toISOString());l?o(l):(console.error(a.message),(0,n.ZP)("something went wrong")),s(!1)})().catch(console.error),()=>{}),[e]);let[d,m]=(0,a.useState)(!1);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,l.jsxs)("div",{className:"flex flex-row gap-2 w-full justify-between",children:[(0,l.jsx)("span",{className:"w-full",children:"Name"}),(0,l.jsx)("span",{className:"w-full",children:"Calorie Count"}),(0,l.jsx)("button",{disabled:!0,className:"invisible",children:"edit"}),(0,l.jsx)("button",{disabled:!0,className:"invisible",children:"delete"})]}),t?(0,l.jsx)("p",{children:"loading..."}):u.map(e=>(0,l.jsx)(r,{entry:e,removeSelf:()=>{o(u.filter(t=>t.id!==e.id))},updateSelf:t=>{o(u.map(s=>s.id!==e.id?s:t))}},e.id)),d?(0,l.jsx)(c,{cancel:()=>m(!1),saveEntry:e=>{o([...u,e]),m(!1)}}):null]}),(0,l.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,l.jsxs)("p",{children:["Daily Total:"," ",u.reduce((e,t)=>e+t.calorie_count,0)]}),(0,l.jsx)("button",{type:"button",onClick:()=>m(!0),className:d?"hidden":"",children:"Add Entry"})]})]})};function o(){return(0,l.jsx)("main",{className:"flex min-h-screen flex-col items-center p-24 gap-2",children:(0,l.jsx)(u,{})})}},4827:function(e,t,s){"use strict";s.d(t,{W:function(){return n},_:function(){return a}});var l=s(2265);let a=(0,s(1375).eI)("https://hixvhfiqkorpicsijqig.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhpeHZoZmlxa29ycGljc2lqcWlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTQ0NDYxMTksImV4cCI6MjAzMDAyMjExOX0.fZBMmE-L0nW-_e9qB5tGZDcrgAHsg1vzJ3K6rRh1FNA"),n=(0,l.createContext)(a)}},function(e){e.O(0,[375,726,971,23,744],function(){return e(e.s=8041)}),_N_E=e.O()}]);